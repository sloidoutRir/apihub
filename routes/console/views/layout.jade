doctype html
html
  head
    meta(charset="utf-8")
    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0")
    title= title

    link(rel='stylesheet', href='/stylesheets/bootstrap-3.3.6.min.css')
    link(rel='stylesheet', href='/stylesheets/ie10-viewport-bug-workaround.css')

    <!-- MelonUI Theme -->
    link(href="/assets/css/main.css" rel="stylesheet" type="text/css")
    link(href="/assets/css/plugins.css" rel="stylesheet" type="text/css")
    link(href="/assets/css/responsive.css" rel="stylesheet" type="text/css")
    link(href="/assets/css/icons.css" rel="stylesheet" type="text/css")
    link(href="/assets/css/fontawesome/font-awesome.min.css" rel="stylesheet" type="text/css")
    link(href='http://fonts.googleapis.com/css?family=Open+Sans:400,600,700', rel='stylesheet', type='text/css')
    link(rel='stylesheet', href='/stylesheets/admin.css')

    block pageStyles
        

    <!--=== JavaScript ===-->

    script(src="/assets/js/libs/jquery-1.10.2.min.js")
    script(type="text/javascript" src="/plugins/jquery-ui/jquery-ui-1.10.2.custom.min.js")
    script(src="/javascripts/bootstrap-3.3.6.min.js")
    script(src="/javascripts/js.cookie.js")
    script(type="text/javascript" src="/assets/js/libs/lodash.compat.min.js")

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    script(src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js")
    script(src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js")
    <![endif]-->

    script(type="text/javascript" src="/assets/js/libs/breakpoints.js")
    script(type="text/javascript" src="/plugins/slimscroll/jquery.slimscroll.min.js")
    script(type="text/javascript" src="/plugins/slimscroll/jquery.slimscroll.horizontal.min.js")

    <!-- Forms -->
    script(type="text/javascript" src="/plugins/uniform/jquery.uniform.min.js") <!-- Styled radio and checkboxes -->
    script(type="text/javascript" src="/plugins/select2/select2.min.js") <!-- Styled select boxes -->

    <!-- DataTables -->
    script(type="text/javascript" src="/plugins/DataTables/jquery.dataTables.js")
    script(type="text/javascript" src="/plugins/DataTables/dataTables.bootstrap.min.js")

    <!-- App -->
    script(type="text/javascript", src="/assets/js/app.js")
    script(type="text/javascript", src="/assets/js/plugins.js")
    script(type="text/javascript", src="/assets/js/plugins.form-components.js")

    script(type="text/javascript").
        $(document).ready(function(){
            "use strict";

            App.init(); // Init layout and core plugins
            Plugins.init(); // Init all plugins
            FormComponents.init(); // Init all form-specific plugins

            //Ajax interceptor
            $( document ).ajaxSend(function( event, xhr, settings ) {
                event.preventDefault();

                var targetLocation = settings.url;
                if(targetLocation.hostname !== location.hostname){
                    console.log("External ajax call - Ignore it");
                }else{
                    //call to current host - detect if jwt cookie expires
                    var jwtToken = Cookies.get('sjwt');
                    if(jwtToken){
                        //Set request header
                        xhr.setRequestHeader('Authorization', 'bearer ' + jwtToken);
                    }else{
                        //Not logged in, retrieve or refresh token
                        console.log("token does not exist");
                    }
                }
            });
        }); 
    
  body(class="theme-dark")
    block header
    block workspace
    block pageScripts
        